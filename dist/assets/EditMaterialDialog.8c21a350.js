import{u as T,R as N,r as m,F as O,a as D,M as F,b as H,c as B,m as E,I,j as h,E as v,d as n,C as Z,e as j,g as W,T as P,f as _,h as K,i as V,k as w,l as X,n as q,o as J,p as Q,P as Y,q as $,s as z,t as ee,v as te,w as se,x as G,y as ae,z as oe,A as ue,B as k,D as ne,G as de,H as ce,J as ie,K as re,L as le,N as me,O as Ee,Q as pe,S as Ae,U as ge,V as Te,W as De,X as Se,Y as Ie,Z as fe,_ as y,$ as xe,a0 as Re}from"./index.c9f8ef6a.js";function Le(){const{permissions:f}=T(w),e=f.get(N.MATERIALS),c=T(X),[{baseMaterial:u,extMaterialIndex:S},r]=m.exports.useState({baseMaterial:O.DSP,extMaterialIndex:0}),i=D(q),A=D(J),L=D(Q),R=m.exports.useMemo(()=>(c.filter(t=>t.material===u)||[{name:"",material:""}]).toSorted((t,a)=>t.name>a.name?1:-1),[c,u]),p=R[S]||{name:"",code:"",image:"",material:O.DSP,purpose:F.BOTH},C=H(p.material,p.name),x=(p==null?void 0:p.material)===O.DSP,g=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434","\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"],d=R.map(t=>[t.name,t.code,B.get(t.purpose)||""]),s=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:p.name||"",message:E.ENTER_CAPTION,type:I.TEXT},{caption:"\u041A\u043E\u0434:",value:p.code,message:E.ENTER_CODE,type:I.TEXT},{caption:"\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435:",value:p.purpose||"",valueCaption:t=>B.get(t)||"",list:B,message:E.ENTER_PURPOSE,type:I.LIST,readonly:!x},{caption:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435:",value:C||"",message:E.ENTER_IMAGE,type:I.FILE}];return h(v,{children:[h("div",{children:[n("div",{className:"d-flex flex-nowrap gap-2 align-items-start",children:n(Z,{title:"\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B: ",value:u,items:j,onChange:(t,a)=>{r(o=>({...o,baseMaterial:W(a),extMaterialIndex:0}))}})}),n("hr",{}),n(P,{heads:g,content:d,onSelectRow:t=>{r(a=>({...a,extMaterialIndex:t}))}})]}),e!=null&&e.Read?n(_,{name:p.name,items:s,onUpdate:e!=null&&e.Update?async(t,a)=>{const o=t[0]?a[0]:"",l=t[1]?a[1]:"",M=t[2]?a[2]:F.FASAD,U=t[3]?a[3]:"";return await L({name:p.name,material:u,newName:o,newCode:l,image:U,purpose:M})}:void 0,onDelete:e!=null&&e.Delete?async()=>{const t=await i(p);return r(a=>({...a,extMaterialIndex:0})),t}:void 0,onAdd:e!=null&&e.Create?async(t,a)=>{const o=a[0],l=a[1],M=K(a[2]),U=a[3];return V(o,u,c)?{success:!1,message:E.MATERIAL_EXIST}:await A({name:o,material:u,code:l,image:"",purpose:M},U)}:void 0}):n("div",{})]})}function Ce(){const{permissions:f}=T(w),e=f.get(N.MATERIALS),c=T($),[{type:u,profileIndex:S},r]=m.exports.useState({type:c[0].type,profileIndex:0}),i=c.filter(t=>t.type===u),A=T(z),L=m.exports.useMemo(()=>A.map(t=>t.name).toSorted(),[A]);m.exports.useMemo(()=>{r({type:c[0].type,profileIndex:0})},[c]);const R=D(ee),p=D(te),C=D(se),x=i[S],g=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434","\u0429\u0435\u0442\u043A\u0430"],d=i.map(t=>[t.name,t.code,t.brush]),s=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:x.name,message:E.ENTER_CAPTION,type:I.TEXT},{caption:"\u041A\u043E\u0434:",value:x.code,message:E.ENTER_CODE,type:I.TEXT},{caption:"\u0429\u0435\u0442\u043A\u0430:",value:x.brush,list:L,message:E.ENTER_BRUSH,type:I.LIST}];return h(v,{children:[h("div",{children:[n("div",{className:"d-flex flex-nowrap gap-2 align-items-start",children:n(Z,{title:"\u0422\u0438\u043F: ",value:u||"",items:Y,onChange:(t,a)=>{r({type:a,profileIndex:0})}})}),n("hr",{}),n(P,{heads:g,content:d,onSelectRow:t=>{r(a=>({...a,profileIndex:t}))}})]}),e!=null&&e.Read?n(_,{name:x.name,items:s,onUpdate:e!=null&&e.Update?async(t,a)=>{const o=t[0]?a[0]:"",l=t[1]?a[1]:"",M=t[2]?a[2]:"";return await C({name,type:u,newName:o,newCode:l,newBrush:M})}:void 0,onDelete:e!=null&&e.Delete?async()=>{const t=await R(x);return r(a=>({...a,profileIndex:0})),t}:void 0,onAdd:e!=null&&e.Create?async(t,a)=>{const o=a[0],l=a[1],M=a[2];return i.find(b=>b.name===o&&b.type===u)?{success:!1,message:E.MATERIAL_EXIST}:await p({name:o,type:u,code:l,brush:M})}:void 0}):n("div",{})]})}function Me(){const{permissions:f}=T(w),e=f.get(N.MATERIALS),c=T(G),u=m.exports.useMemo(()=>c.toSorted((s,t)=>(s==null?void 0:s.name)>(t==null?void 0:t.name)?1:-1),[c]),S=T(X);m.exports.useMemo(()=>S.filter(s=>s.material===O.DSP).map(s=>s.name),[S]);const[r,i]=m.exports.useState(0),{name:A,code:L}=u[r]||{name:"",dsp:"",code:""},R=D(ae),p=D(oe),C=D(ue),x=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434"],g=u.map(s=>[s.name,s.code]),d=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:A||"",message:E.ENTER_CAPTION,type:I.TEXT},{caption:"\u041A\u043E\u0434:",value:L,message:E.ENTER_CODE,type:I.TEXT}];return h(v,{children:[n(P,{heads:x,content:g,onSelectRow:s=>{i(s)}}),e!=null&&e.Read?n(_,{name:A,items:d,onUpdate:e!=null&&e.Update?async(s,t)=>{const a=s[0]?t[0]:"",o=s[1]?t[1]:"",l=s[2]?t[2]:"";return await C({name:u[r].name,newName:a,code:o,dsp:l})}:void 0,onDelete:e!=null&&e.Delete?async s=>{const t=u.findIndex(o=>o.name===s),a=await R(u[t]);return i(0),a}:void 0,onAdd:e!=null&&e.Create?async(s,t)=>{const a=t[0],o=t[1];return u.find(M=>M.name===a)?{success:!1,message:E.MATERIAL_EXIST}:await p({name:a,code:o})}:void 0}):n("div",{})]})}function he(){const{permissions:f}=T(w),e=f.get(N.MATERIALS),c=T(k),u=m.exports.useMemo(()=>c.toSorted((s,t)=>s.name>t.name?1:-1),[c]),S=T(X),[r,i]=m.exports.useState(0);m.exports.useMemo(()=>S.filter(s=>s.material===O.DSP).map(s=>s.name),[S]);const{name:A,code:L}=u[r]||{name:"",code:""},R=D(ne),p=D(de),C=D(ce),x=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434"],g=u.map(s=>[s.name,s.code]),d=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:A||"",message:E.ENTER_CAPTION,type:I.TEXT},{caption:"\u041A\u043E\u0434:",value:L,message:E.ENTER_CODE,type:I.TEXT}];return m.exports.useEffect(()=>{i(0)},[u]),h(v,{children:[n(P,{heads:x,content:g,onSelectRow:s=>{i(s)}}),e!=null&&e.Read?n(_,{name:A,items:d,onUpdate:e!=null&&e.Update?async(s,t)=>{const a=s[0]?t[0]:"",o=s[1]?t[1]:"";return await C({name:A,newName:a,code:o})}:void 0,onDelete:e!=null&&e.Delete?async()=>{const s=await R(u[r]);return i(0),s}:void 0,onAdd:e!=null&&e.Create?async(s,t)=>{const a=t[0],o=t[1];return u.find(M=>M.name===a)?{success:!1,message:E.MATERIAL_EXIST}:await p({name:a,code:o})}:void 0}):n("div",{})]})}function ye(){const{permissions:f}=T(w),e=f.get(N.MATERIALS),c=T(z),u=m.exports.useMemo(()=>c.toSorted((d,s)=>d.name>s.name?1:-1),[c]),[S,r]=m.exports.useState(0),{name:i,code:A}=u[S]||{name:"",code:""},L=D(ie),R=D(re),p=D(le),C=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434"],x=u.map(d=>[d.name,d.code]),g=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:i,message:E.ENTER_CAPTION,type:I.TEXT},{caption:"\u041A\u043E\u0434:",value:A,message:E.ENTER_CODE,type:I.TEXT}];return m.exports.useEffect(()=>{r(0)},[u]),h(v,{children:[n(P,{heads:C,content:x,onSelectRow:d=>{r(d)}}),e!=null&&e.Read?n(_,{name:i,items:g,onUpdate:e!=null&&e.Update?async(d,s)=>{const t=d[0]?s[0]:"",a=d[1]?s[1]:"";return await p({name:i,newName:t,code:a})}:void 0,onDelete:e!=null&&e.Delete?async d=>{const s=u.findIndex(a=>a.name===d),t=await L(u[s]);return r(0),t}:void 0,onAdd:e!=null&&e.Create?async(d,s)=>{const t=s[0],a=s[1];return u.find(l=>l.name===t)?{success:!1,message:E.MATERIAL_EXIST}:await R({name:t,code:a})}:void 0}):n("div",{})]})}function Ne(){const{permissions:f}=T(w),e=f.get(N.MATERIALS),c=T(me),u=m.exports.useMemo(()=>c.toSorted((g,d)=>g.caption>d.caption?1:-1),[c]),[S,r]=m.exports.useState(0),{name:i,caption:A,code:L}=u[S]||{name:"",caption:"",code:""},R=D(Ee),p=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434"],C=u.map(g=>[g.caption,g.code]),x=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:A,message:E.ENTER_CAPTION,type:I.TEXT},{caption:"\u041A\u043E\u0434:",value:L,message:E.ENTER_CODE,type:I.TEXT}];return m.exports.useEffect(()=>{r(0)},[c]),h(v,{children:[n(P,{heads:p,content:C,onSelectRow:g=>{r(g)}}),e!=null&&e.Read?n(_,{name:i,items:x,onUpdate:e!=null&&e.Update?async(g,d)=>{const s=g[0]?d[0]:"",t=g[1]?d[1]:"";return await R({name:i,caption:s,code:t})}:void 0}):n("div",{})]})}function we(){const{permissions:f}=T(w),e=f.get(N.MATERIALS),c=T(pe),u=m.exports.useMemo(()=>c.toSorted((d,s)=>d.name>s.name?1:-1),[c]),[S,r]=m.exports.useState(0),{name:i,code:A}=u[S]||{name:"",code:""},L=D(Ae),R=D(ge),p=D(Te),C=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434"],x=u.map(d=>[d.name,d.code]),g=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:i||"",message:E.ENTER_CAPTION,type:I.TEXT},{caption:"\u041A\u043E\u0434:",value:A,message:E.ENTER_CODE,type:I.TEXT}];return m.exports.useEffect(()=>{r(0)},[c]),h(v,{children:[n(P,{heads:C,content:x,onSelectRow:d=>{r(d)}}),e!=null&&e.Read?n(_,{name:i,items:g,onUpdate:e!=null&&e.Update?async(d,s)=>{const t=d[0]?s[1]:"",a=d[1]?s[2]:"";return await p({name:i,code:t,caption:a})}:void 0,onDelete:e!=null&&e.Delete?async()=>{const d=await L(u[S]);return r(0),d}:void 0,onAdd:async(d,s)=>{const t=s[0];return u.find(o=>o.name===i)?{success:!1,message:E.MATERIAL_EXIST}:await R({name:i,code:t})}}):n("div",{})]})}function ve(){const{permissions:f}=T(w),e=f.get(N.MATERIALS),c=T(G),u=T(k),S=T(De),r=m.exports.useMemo(()=>c.toSorted((o,l)=>(o==null?void 0:o.name)>(l==null?void 0:l.name)?1:-1).map(o=>o.name),[c]),i=m.exports.useMemo(()=>u.toSorted((o,l)=>(o==null?void 0:o.name)>(l==null?void 0:l.name)?1:-1).map(o=>o.name),[u]),A=m.exports.useMemo(()=>S.toSorted((o,l)=>(o==null?void 0:o.name)>(l==null?void 0:l.name)?1:-1),[S]),L=T(X);m.exports.useMemo(()=>L.filter(o=>o.material===O.DSP).map(o=>o.name),[L]);const[R,p]=m.exports.useState(0),{name:C,edge:x,zaglushka:g}=A[R]||{name:"",edge:"",zaglushka:""};D(Se),D(Ie);const d=D(fe),s=["\u0414\u0421\u041F","\u041A\u0440\u043E\u043C\u043A\u0430","\u0417\u0430\u0433\u043B\u0443\u0448\u043A\u0430"],t=A.map(o=>[o.name,o.edge,o.zaglushka]),a=[{caption:"\u0414\u0421\u041F:",value:C||"",message:E.ENTER_CAPTION,type:I.TEXT,readonly:!0},{caption:"\u041A\u0440\u043E\u043C\u043A\u0430:",value:x,message:E.ENTER_CODE,type:I.LIST,list:r,listWithoutEmptyRow:!0},{caption:"\u0417\u0430\u0433\u043B\u0443\u0448\u043A\u0430:",value:g,message:E.ENTER_CODE,type:I.LIST,list:i,listWithoutEmptyRow:!0}];return h(v,{children:[n(P,{heads:s,content:t,onSelectRow:o=>{p(o)}}),e!=null&&e.Read?n(_,{name:C,items:a,onUpdate:e!=null&&e.Update?async(o,l)=>{const M=o[1]?l[1]:"",U=o[2]?l[2]:"";return await d({name:A[R].name,edge:M,zaglushka:U})}:void 0}):n("div",{})]})}function Ue(){const{permissions:f}=T(w),e=f.get(N.MATERIALS),[c,u]=m.exports.useState(y.PLATE),S=[...xe.entries()].map((i,A)=>n("div",{className:c===i[0]?"tab-button-active":"tab-button-inactive",onClick:()=>{u(i[0])},role:"button",children:i[1]},A)),r=Pe(c);return m.exports.useEffect(()=>{e!=null&&e.Read||window.location.replace("/")},[e]),h("div",{className:"database-edit-container",children:[n("div",{className:"tab-header-container",children:S}),r]})}function Pe(f){return{[y.PLATE]:n(Le,{}),[y.PROFILE]:n(Ce,{}),[y.EDGE]:n(Me,{}),[y.ZAGLUSHKI]:n(he,{}),[y.DSP_EDGE_ZAGL]:n(ve,{}),[y.BRUSH]:n(ye,{}),[y.TREMPEL]:n(Ne,{}),[y.UPLOTNITEL]:n(we,{})}[f]||n(Re,{})}export{Ue as default};
