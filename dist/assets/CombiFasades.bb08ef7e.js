import{c as e,u as g,a as d,L as s4,N as g4,R as i4,r as f,O as E4,j as v,Q as b,C as B,U as $,P as V,e as o4,V as v4,X as f4,i as n4,Y as L,Z as C4,_ as x4,$ as F4,a0 as A4,a1 as y4,a2 as D4,a3 as b4,a4 as w4,a5 as T4,a6 as I4,a7 as W4,a8 as B4,a9 as u4,aa as H4,ab as R4,ac as N4,ad as P4,ae as w,af as a4,ag as S4,ah as k4,ai as M4,aj as $4,ak as V4,al as O4,am as L4,an as _4,ao as j4,ap as G4,aq as U4,ar as c4,as as z4,at as q4,b as X4,H as l4,au as Y4,av as r4,aw as Q4,ax as Z4,ay as e4,az as J4,aA as K4}from"./index.4b9f9d3c.js";import{I as Z,P as d4,S as uu,s as eu,a as tu}from"./SpecificationTable.6fb4c3dc.js";function O(u){return e("div",{className:"property-row",children:u.children})}const su=[2,3,4,5,6];function iu(){const u=g(o4),s=g(v4),t=g(f4),o=g(n4),{profile:n,fasadCount:h,type:l,wardHeight:a,wardWidth:p}=g(L),c=d(C4),i=d(x4),F=d(F4),E=d(A4),T=d(y4),D=s4(),A=g4(),I=d(D4),k=d(b4),H=d(w4),{next:R,previous:C}=g(T4),x=d(I4),W=d(W4),y=u.permissions.get(i4.COMBIFASADES),_=!(y!=null&&y.Create),j=!(y!=null&&y.Read),G=f.exports.useMemo(()=>[...s.keys()].filter(m=>m!==E4.GARDEROB),[s]),U=async()=>(await A("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u043C \u0442\u0438\u043F\u0435 \u0448\u043A\u0430\u0444\u0430"),!1),z=async()=>(await A("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u0439 \u0432\u044B\u0441\u043E\u0442\u0435"),!1),q=async()=>(await A("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u0439 \u0448\u0438\u0440\u0438\u043D\u0435"),!1),X=async()=>(await A("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u043C \u0442\u0438\u043F\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044F"),!1),Y=async()=>(await A("\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0444\u0430\u0441\u0430\u0434\u043E\u0432 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u0430 \u043F\u0440\u0438 \u0434\u0430\u043D\u043D\u043E\u043C \u043A\u043E\u043B-\u0432\u0435 \u0444\u0430\u0441\u0430\u0434\u043E\u0432"),!1);return v("div",{className:"properties-bar",children:[v("div",{className:"d-flex flex-nowrap justify-content-between",children:[e("div",{children:"\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0448\u043A\u0430\u0444\u0430"}),v(Z,{justifyContent:"flex-end",children:[e(b,{title:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",icon:"new",onClick:async()=>{await D("\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0432 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435?")&&I()}}),e(b,{title:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C",icon:"open",disabled:j,onClick:()=>{H()}}),e(b,{title:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",icon:"save",disabled:_,onClick:()=>{k()}}),e(b,{title:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",icon:"undo",disabled:!C,onClick:()=>{x()}}),e(b,{title:"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C",icon:"redo",disabled:!R,onClick:()=>{W()}})]})]}),e("hr",{}),v(d4,{children:[e(B,{title:"\u0422\u0438\u043F:",value:l,items:G,displayValue:m=>s.get(m)||"",onChange:m=>{T([m,U])}}),e("div",{className:"text-end",children:"\u0428\u0438\u0440\u0438\u043D\u0430: "}),e(O,{children:e($,{name:"width",value:p,type:V.INTEGER_POSITIVE_NUMBER,min:900,max:4e3,setValue:m=>{F([+m,q])},submitOnLostFocus:!0})}),e("div",{className:"text-end",children:"\u0412\u044B\u0441\u043E\u0442\u0430: "}),e(O,{children:e($,{name:"height",value:a,type:V.INTEGER_POSITIVE_NUMBER,min:1800,max:2700,setValue:m=>{E([+m,z])},submitOnLostFocus:!0})}),e(uu,{title:"\u041A\u043E\u043B-\u0432\u043E \u0444\u0430\u0441\u0430\u0434\u043E\u0432:",value:h,items:su,displayValue:m=>`${m}`,onChange:m=>{i([+m,Y])}}),e(B,{title:"\u041F\u0440\u043E\u0444\u0438\u043B\u044C:",value:n.id,items:[...t.keys()],displayValue:m=>{var N,P;return((P=o.get(((N=t.get(m))==null?void 0:N.charId)||0))==null?void 0:P.name)||""},onChange:m=>{c([m,X])}})]})]})}function t4({title:u,onClick:s,iconPressed:t,iconUnPressed:o,pressed:n,disabled:h=!1,visible:l=!0}){let a=h?"button-disabled":"button";a+=n?" button-down":" button-up";const{onMouseOver:p,onMouseLeave:c}=B4(u);return e("div",{style:{visibility:l?"visible":"hidden"},className:`${a} ${n?t:o} noselect`,onClick:i=>{h||(i.stopPropagation(),s())},onMouseOver:i=>{p(i,{disabled:h})},onMouseLeave:()=>{c()},onContextMenu:i=>{i.preventDefault()}})}const ou=[1,2,3,4,5,6,7,8,9,10],M=new Map;function nu(){const{permissions:u}=g(o4),s=u.get(i4.TEMPLATE),t=g(a4);g(L);const o=t==null?void 0:t.parent,n=g(S4),h=g(k4),l=g(n4),{width:a,height:p,materialId:c,fasadType:i,direction:F,directions:E,sectionCount:T,fixHeight:D,fixWidth:A,disabledWidth:I,disabledHeight:k,disabledFixHeight:H,disabledFixWidth:R}=au(t),C=f.exports.useMemo(()=>{const r=h.filter(S=>S.id===i);return(i===u4.DSP||i===u4.LACOBEL?r.toSorted((S,p4)=>{var J,K;return(((J=l.get(S.charId))==null?void 0:J.name)||"")>(((K=l.get(p4.charId))==null?void 0:K.name)||"")?1:-1}):r).map(S=>S.charId)},[h,i,l]),x=t?ou:[],W=d(M4),y=d($4),_=d(V4),j=d(O4),G=d(L4),U=d(_4),z=d(j4),q=d(G4),X=d(U4),Y=d(c4),m=d(z4),N=H4(o),P=R4(o),m4=s4();return v("div",{className:"properties-bar",onClick:r=>{r.stopPropagation()},children:[v("div",{className:"property-bar-header",children:["\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0444\u0430\u0441\u0430\u0434\u0430",v(Z,{justifyContent:"flex-end",children:[e(b,{title:"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u0444\u0430\u0441\u0430\u0434\u0430",icon:"new",disabled:(t==null?void 0:t.level)===0&&!t.children.length,onClick:async()=>{await m4("\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u0444\u0430\u0441\u0430\u0434\u0430?")&&W()}}),(s==null?void 0:s.Read)&&e(b,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0438\u0437 \u0448\u0430\u0431\u043B\u043E\u043D\u0430",icon:"open",visible:t!==null,onClick:()=>{m(!1)}}),(s==null?void 0:s.Create)&&e(b,{title:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043A\u0430\u043A \u0448\u0430\u0431\u043B\u043E\u043D",icon:"save",visible:t!==null,onClick:()=>{m(!0)}}),e(b,{title:"\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043D\u0430 \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u0432\u0432\u0435\u0440\u0445",icon:"selectParent",onClick:()=>{Y(o)},disabled:t===null||(t==null?void 0:t.level)===0})]})]}),e("hr",{}),v(d4,{children:[e("div",{className:"text-end",children:"\u0412\u044B\u0441\u043E\u0442\u0430: "}),v(O,{children:[e($,{value:p,type:V.INTEGER_POSITIVE_NUMBER,min:1,setValue:r=>{y(+r)},disabled:k}),P>0&&!D&&e("span",{children:`${t==null?void 0:t.heightRatio}/${P}`}),e(t4,{pressed:D,iconPressed:"fix",iconUnPressed:"unfix",title:"\u0417\u0430\u0444\u0438\u043A\u0441\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u044B\u0441\u043E\u0442\u0443",visible:!H,onClick:()=>{G(!D)}})]}),e("div",{className:"text-end",children:"\u0428\u0438\u0440\u0438\u043D\u0430: "}),v(O,{children:[e($,{value:a,type:V.INTEGER_POSITIVE_NUMBER,min:1,setValue:r=>{_(+r)},disabled:I}),N>0&&!A&&e("span",{children:`${t==null?void 0:t.widthRatio}/${N}`}),e(t4,{pressed:A,iconPressed:"fix",iconUnPressed:"unfix",title:"\u0417\u0430\u0444\u0438\u043A\u0441\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0448\u0438\u0440\u0438\u043D\u0443",visible:!R,onClick:()=>{j(!A)}})]}),e(B,{title:"\u0422\u0438\u043F:",value:i,items:[...n.keys()],displayValue:r=>n.get(r),disabled:!t,onChange:r=>{U(r)}}),e(B,{title:"\u0426\u0432\u0435\u0442/\u0420\u0438\u0441\u0443\u043D\u043E\u043A:",value:c,items:C,displayValue:r=>{var Q;return(Q=l.get(r))==null?void 0:Q.name},disabled:!t,onChange:r=>{z(r)}}),e(B,{title:"\u041D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044F:",value:F,items:[...E.keys()],displayValue:r=>E.get(r),disabled:!t,onChange:r=>{q(r)}}),e(B,{title:"\u041A\u043E\u043B-\u0432\u043E \u0441\u0435\u043A\u0446\u0438\u0439:",value:T,items:x,displayValue:r=>`${r}`,disabled:!t,onChange:r=>{X(r)}})]})]})}function au(u,s){const t=N4(u),o=P4(u),n=(u==null?void 0:u.materialId)||0,h=(u==null?void 0:u.fasadType)||0;M.clear(),u&&(M.set(w.WIDTH,"\u0412\u0435\u0440\u0442\u0438\u043A\u0430\u043B\u044C\u043D\u043E"),M.set(w.HEIGHT,"\u0413\u043E\u0440\u0438\u0437\u043E\u043D\u0442\u0430\u043B\u044C\u043D\u043E"));const l=u==null?void 0:u.division,a=u&&u.children.length>1?u.children.length:1,p=(u==null?void 0:u.fixedWidth)||!1,c=(u==null?void 0:u.fixedHeight)||!1,i=u==null?void 0:u.parent;let F=!u||u.level===0||u.level===1&&(i==null?void 0:i.division)===w.HEIGHT||u.fixedWidth,E=!u||u.level===0||u.level===1&&(i==null?void 0:i.division)===w.WIDTH||u.fixedHeight;const T=!u||u.level===0||u.level===1&&(i==null?void 0:i.division)===w.HEIGHT,D=!u||u.level===0||u.level===1&&(i==null?void 0:i.division)===w.WIDTH;return F=F||!!(u&&u.level<=1&&(i==null?void 0:i.division)===w.HEIGHT),E=E||!!(u&&u.level<=1&&(i==null?void 0:i.division)===w.WIDTH),{width:t,height:o,materialId:n,fasadType:h,direction:l,directions:M,sectionCount:a,fixHeight:c,fixWidth:p,disabledWidth:F,disabledHeight:E,disabledFixHeight:D,disabledFixWidth:T}}function cu(){return e("div",{className:"fixedHeight"})}function lu(){return e("div",{className:"fixedWidth"})}function ru(){return e("div",{className:"fixedBoth"})}function h4(u){const s=u.fasad,t=q4(s),o=s.children.length===0,n=u.activeFasad,h=s.backImageProps;t||(h.top=0,h.left=0,h.size="");const{showFixIcons:l}=g(Y4),a=d(c4),p=X4(s.materialId),c=f.exports.useRef(null),i=f.exports.useRef(null);let F={gridTemplateRows:"1fr",gridTemplateColumns:"1fr"};if(!o){const C=s.division===w.HEIGHT,x=C?s.height:s.width,W=s.children.map(y=>`${(C?(y.height+1)/x:(y.width+1)/x).toFixed(3)}fr`).join(" ");F=C?{gridTemplateRows:W,gridTemplateColumns:"1fr"}:{gridTemplateRows:"1fr",gridTemplateColumns:W}}let E=s.level===0?{height:"100%"}:{};E={...E,boxShadow:s===n?"inset 0px 0px 10px red":""};let T={},D="";o?(E={...E,display:"flex",overflow:"hidden",flexShrink:"0",justifyContent:"center",alignItems:"center",objectFit:"cover",cursor:"pointer",border:"1px solid black",backgroundRepeat:"repeat"},T={onClick:C=>{C.stopPropagation(),a(s)}},D="fasad-section"):E={...E,border:s===n?"1px solid red":"",backgroundColor:"white",backgroundImage:""};const A=s.children.length===0&&s.fixedHeight&&l,I=s.children.length===0&&s.fixedWidth&&l,H=A&&I?e(ru,{}):A?e(cu,{}):I?e(lu,{}):e(l4,{}),R=s.children.length>1?s.children.map((C,x)=>e(h4,{fasad:C,activeFasad:u.activeFasad,rootFasad:u.rootFasad},x)):"";return f.exports.useEffect(()=>{const C=new Image,x=p;C.src=x,c.current&&(c.current.style.backgroundImage=x||getComputedStyle(c.current).getPropertyValue("--default-image")),c.current&&o&&x&&(c.current.style.backgroundImage=`url(${x})`)},[p,o]),v("div",{ref:o?c:i,className:D,style:{display:"grid",...F,gap:"1px",...E},...T,children:[R,H]})}function du({index:u}){const{rootFasades:s}=g(L),t=g(r4),o=window.innerWidth,n=s[u],h=n.width/n.height,l=g(a4),a=f.exports.useRef(null),p=t===u?"fw-bold":"",c=i=>{a.current&&(a.current.style.width=a.current.offsetHeight*i+"px")};return f.exports.useLayoutEffect(()=>{c(h)},[h,o]),v("div",{className:"fasad-container",children:[e("div",{className:`text-center ${p}`,children:`\u0424\u0430\u0441\u0430\u0434 ${u+1}`}),e("div",{ref:a,className:"fasad-section-container",style:{height:"100%",width:"auto"},children:e(h4,{fasad:n,activeFasad:l,rootFasad:n})})]})}function hu(){const[,u]=f.exports.useState(0),[{rootFasades:s}]=Q4(L),t=s[0].width/s[0].height,o=f.exports.useRef(null),n=s.map((l,a)=>e(du,{index:a},a)),h=window.innerWidth;return f.exports.useEffect(()=>{const l=()=>u(Math.random());return window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}},[]),f.exports.useLayoutEffect(()=>{mu(t,s,o)},[h,t,s]),e("div",{ref:o,className:"rootfasades-container",children:n})}const mu=(u,s,t)=>{if(!t.current)return;const o=document.querySelector(".properties-container"),n=document.querySelector(".combifasades-container"),h=Z4(),l=parseFloat(getComputedStyle(t.current).gap);if(h){const a=o.offsetHeight,p=n.offsetWidth-o.offsetWidth,c=a*u,i=Math.min(Math.floor(p/(c+l)),s.length),F=c*i;t.current.style.height=`${a}px`,t.current.style.width=`${F}px`,t.current.style.overflowX=i<s.length?"scroll":"unset"}else{const a=Math.ceil(s.length/2),p=parseFloat(getComputedStyle(o).width),i=p/a/u;t.current.style.width=`${p}px`,t.current.style.height=`${i}px`,t.current.style.overflowX=a<s.length?"scroll":"unset"}};function pu(){const u=d(eu),s=g(J4),t=g(r4),o=d(K4),[n,h]=f.exports.useState(0),l=s[n]||[],a=f.exports.useMemo(()=>s.map((p,c)=>e("div",{role:"button",className:c===n?"tab-button-active":"tab-button-inactive",onClick:()=>{o(c)},children:`\u0424\u0430\u0441\u0430\u0434 ${c+1}`},c)),[s,n]);return f.exports.useEffect(()=>{h(t)},[t]),v("div",{className:"ml-auto",children:[e(Z,{justifyContent:"flex-end",children:e(b,{icon:"excel",title:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 Excel",caption:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432 Excel",onClick:()=>u(l,`\u0424\u0430\u0441\u0430\u0434 (${n+1} \u0438\u0437 ${s.length})`)})}),v("div",{className:"ml-auto",children:[e("div",{className:"d-flex flex-row flex-nowrap justify-content-start align-items-center gap-1",children:a}),e("hr",{}),e(tu,{purposes:[e4.FASAD,e4.BOTH],specification:l})]})]})}function vu(){return e(l4,{children:e("div",{className:"main-container",children:v("div",{className:"combifasades-container",children:[v("div",{className:"properties-container",children:[e(iu,{}),e(nu,{})]}),e(hu,{}),e(pu,{})]})})})}export{vu as default};
