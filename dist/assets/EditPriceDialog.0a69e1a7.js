import{u as c,R as U,a as D,r as o,a1 as N,m as p,I as r,a2 as f,j as _,E as k,d,T as w,f as M,k as O,a3 as $,a4 as j,a5 as v,a6 as V}from"./index.e4e4b569.js";function B(){const{permissions:P}=c(O),t=P.get(U.PRICES),E=D($),m=c(j),i=c(v),u=o.exports.useMemo(()=>m.map(e=>{var s,a;return{...e,units:((s=i.find(n=>n.name===e.name))==null?void 0:s.units)||"",caption:((a=i.find(n=>n.name===e.name))==null?void 0:a.caption)||""}}),[m,i]),[l,R]=o.exports.useState(0),T={name:"",caption:"",price:"",markup:""},{name:y,caption:I,price:A,markup:x}=u&&u[l]?{...u[l]||T}:T,C=D(V),S=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u0415\u0434","\u0426\u0435\u043D\u0430","\u041D\u0430\u0446\u0435\u043D\u043A\u0430"],L=u.map(e=>[e.caption||"",N.get(e.units||"")||"",`${e.price||""}`,`${e.markup||""}`]),g=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:I||"",message:p.ENTER_CAPTION,type:r.TEXT,readonly:!0},{caption:"\u0426\u0435\u043D\u0430:",value:`${A}`,message:p.ENTER_PRICE,type:r.TEXT,propertyType:f.POSITIVE_NUMBER},{caption:"\u041D\u0430\u0446\u0435\u043D\u043A\u0430:",value:`${x}`,message:p.ENTER_MARKUP,type:r.TEXT,propertyType:f.POSITIVE_NUMBER}];return o.exports.useEffect(()=>{E()},[E]),o.exports.useEffect(()=>{t!=null&&t.Read||window.location.replace("/")},[t]),_(k,{children:[d(w,{heads:S,content:L,onSelectRow:e=>R(e)}),(t==null?void 0:t.Create)||(t==null?void 0:t.Update)||(t==null?void 0:t.Delete)?d(M,{items:g,onUpdate:async(e,s)=>{const a={name:y};return e[1]&&(a.price=+s[1]),e[2]&&(a.markup=+s[2]),await C(a)}}):d("div",{})]})}export{B as default};
