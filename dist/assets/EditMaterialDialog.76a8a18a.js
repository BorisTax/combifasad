import{u as S,R as P,r as m,F as b,a as D,M as G,b as H,c as B,m as r,I as T,j as y,E as v,d as o,C as Z,e as z,g as j,T as _,f as O,h as K,i as V,k as U,l as F,n as q,o as J,p as Q,P as W,q as Y,s as k,t as $,v as ee,w as te,x as se,y as ue,z as ae,A as ne,B as oe,D as ce,G as de,H as ie,J as le,K as re,L as Ee,N as me,O as pe,Q as Ae,S as Te,U as De,V as ge,W as w,X as Se,Y as fe}from"./index.4d63a749.js";function Ie(){const{permissions:f}=S(U),e=f.get(P.MATERIALS),d=S(F),[{baseMaterial:u,extMaterialIndex:g},i]=m.exports.useState({baseMaterial:b.DSP,extMaterialIndex:0}),c=D(q),I=D(J),R=D(Q),L=m.exports.useMemo(()=>(d.filter(s=>s.material===u)||[{name:"",material:""}]).toSorted((s,t)=>s.name>t.name?1:-1),[d,u]),E=L[g]||{name:"",code:"",image:"",material:b.DSP,purpose:G.BOTH},M=H(E.material,E.name),C=(E==null?void 0:E.material)===b.DSP,p=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434","\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"],n=L.map(s=>[s.name,s.code,B.get(s.purpose)||""]),l=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:E.name||"",message:r.ENTER_CAPTION,type:T.TEXT},{caption:"\u041A\u043E\u0434:",value:E.code,message:r.ENTER_CODE,type:T.TEXT},{caption:"\u041D\u0430\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435:",value:E.purpose||"",valueCaption:s=>B.get(s)||"",list:B,message:r.ENTER_PURPOSE,type:T.LIST,readonly:!C},{caption:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435:",value:M||"",message:r.ENTER_IMAGE,type:T.FILE}];return y(v,{children:[y("div",{children:[o("div",{className:"d-flex flex-nowrap gap-2 align-items-start",children:o(Z,{title:"\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B: ",value:u,items:z,onChange:(s,t)=>{i(a=>({...a,baseMaterial:j(t),extMaterialIndex:0}))}})}),o("hr",{}),o(_,{heads:p,content:n,onSelectRow:s=>{i(t=>({...t,extMaterialIndex:s}))}})]}),(e==null?void 0:e.Create)||(e==null?void 0:e.Update)||(e==null?void 0:e.Delete)?o(O,{name:E.name,items:l,onUpdate:e!=null&&e.Update?async(s,t)=>{const a=s[0]?t[0]:"",A=s[1]?t[1]:"",x=s[2]?t[2]:G.FASAD,N=s[3]?t[3]:"";return await R({name:E.name,material:u,newName:a,newCode:A,image:N,purpose:x})}:void 0,onDelete:e!=null&&e.Delete?async()=>{const s=await c(E);return i(t=>({...t,extMaterialIndex:0})),s}:void 0,onAdd:e!=null&&e.Create?async(s,t)=>{const a=t[0],A=t[1],x=K(t[2]),N=t[3];return V(a,u,d)?{success:!1,message:r.MATERIAL_EXIST}:await I({name:a,material:u,code:A,image:"",purpose:x},N)}:void 0}):o("div",{})]})}function Ce(){const{permissions:f}=S(U),e=f.get(P.MATERIALS),d=S(Y),[{type:u,profileIndex:g},i]=m.exports.useState({type:d[0].type,profileIndex:0}),c=d.filter(s=>s.type===u),I=S(k),R=m.exports.useMemo(()=>I.map(s=>s.name).toSorted(),[I]);m.exports.useMemo(()=>{i({type:d[0].type,profileIndex:0})},[d]);const L=D($),E=D(ee),M=D(te),C=c[g],p=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434","\u0429\u0435\u0442\u043A\u0430"],n=c.map(s=>[s.name,s.code,s.brush]),l=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:C.name,message:r.ENTER_CAPTION,type:T.TEXT},{caption:"\u041A\u043E\u0434:",value:C.code,message:r.ENTER_CODE,type:T.TEXT},{caption:"\u0429\u0435\u0442\u043A\u0430:",value:C.brush,list:R,message:r.ENTER_BRUSH,type:T.LIST}];return y(v,{children:[y("div",{children:[o("div",{className:"d-flex flex-nowrap gap-2 align-items-start",children:o(Z,{title:"\u0422\u0438\u043F: ",value:u||"",items:W,onChange:(s,t)=>{i({type:t,profileIndex:0})}})}),o("hr",{}),o(_,{heads:p,content:n,onSelectRow:s=>{i(t=>({...t,profileIndex:s}))}})]}),(e==null?void 0:e.Create)||(e==null?void 0:e.Update)||(e==null?void 0:e.Delete)?o(O,{name:C.name,items:l,onUpdate:e!=null&&e.Update?async(s,t)=>{const a=s[0]?t[0]:"",A=s[1]?t[1]:"",x=s[2]?t[2]:"";return await M({name,type:u,newName:a,newCode:A,newBrush:x})}:void 0,onDelete:e!=null&&e.Delete?async()=>{const s=await L(C);return i(t=>({...t,profileIndex:0})),s}:void 0,onAdd:e!=null&&e.Create?async(s,t)=>{const a=t[0],A=t[1],x=t[2];return c.find(h=>h.name===a&&h.type===u)?{success:!1,message:r.MATERIAL_EXIST}:await E({name:a,type:u,code:A,brush:x})}:void 0}):o("div",{})]})}function xe(){const{permissions:f}=S(U),e=f.get(P.MATERIALS),d=S(se),u=m.exports.useMemo(()=>d.toSorted((t,a)=>(t==null?void 0:t.name)>(a==null?void 0:a.name)?1:-1),[d]),g=S(F),i=m.exports.useMemo(()=>g.filter(t=>t.material===b.DSP).map(t=>t.name),[g]),[c,I]=m.exports.useState(0),{name:R,dsp:L,code:E}=u[c]||{name:"",dsp:"",code:""},M=D(ue),C=D(ae),p=D(ne),n=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434","\u0421\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0414\u0421\u041F"],l=u.map(t=>[t.name,t.code,t.dsp]),s=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:R||"",message:r.ENTER_CAPTION,type:T.TEXT},{caption:"\u041A\u043E\u0434:",value:E,message:r.ENTER_CODE,type:T.TEXT},{caption:"\u0421\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0414\u0421\u041F:",value:L,list:i,message:r.ENTER_CORRESPOND,type:T.LIST}];return y(v,{children:[o(_,{heads:n,content:l,onSelectRow:t=>{I(t)}}),(e==null?void 0:e.Create)||(e==null?void 0:e.Update)||(e==null?void 0:e.Delete)?o(O,{name:R,items:s,onUpdate:e!=null&&e.Update?async(t,a)=>{const A=t[0]?a[0]:"",x=t[1]?a[1]:"",N=t[2]?a[2]:"";return await p({name:u[c].name,newName:A,code:x,dsp:N})}:void 0,onDelete:e!=null&&e.Delete?async t=>{const a=u.findIndex(x=>x.name===t),A=await M(u[a]);return I(0),A}:void 0,onAdd:e!=null&&e.Create?async(t,a)=>{const A=a[0],x=a[1],N=a[2];return u.find(X=>X.name===A)?{success:!1,message:r.MATERIAL_EXIST}:await C({name:A,dsp:N,code:x})}:void 0}):o("div",{})]})}function Re(){const{permissions:f}=S(U),e=f.get(P.MATERIALS),d=S(oe),u=m.exports.useMemo(()=>d.toSorted((t,a)=>t.name>a.name?1:-1),[d]),g=S(F),[i,c]=m.exports.useState(0),I=m.exports.useMemo(()=>g.filter(t=>t.material===b.DSP).map(t=>t.name),[g]),{name:R,dsp:L,code:E}=u[i]||{name:"",dsp:"",code:""},M=D(ce),C=D(de),p=D(ie),n=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434","\u0421\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0414\u0421\u041F"],l=u.map(t=>[t.name,t.code,t.dsp]),s=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:R||"",message:r.ENTER_CAPTION,type:T.TEXT},{caption:"\u041A\u043E\u0434:",value:E,message:r.ENTER_CODE,type:T.TEXT},{caption:"\u0421\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0414\u0421\u041F:",value:L,list:I,message:r.ENTER_CORRESPOND,type:T.LIST}];return m.exports.useEffect(()=>{c(0)},[u]),y(v,{children:[o(_,{heads:n,content:l,onSelectRow:t=>{c(t)}}),(e==null?void 0:e.Create)||(e==null?void 0:e.Update)||(e==null?void 0:e.Delete)?o(O,{name:R,items:s,onUpdate:e!=null&&e.Update?async(t,a)=>{const A=t[0]?a[0]:"",x=t[1]?a[1]:"",N=t[2]?a[2]:"";return await p({name:R,newName:A,code:x,dsp:N})}:void 0,onDelete:e!=null&&e.Delete?async()=>{const t=await M(u[i]);return c(0),t}:void 0,onAdd:e!=null&&e.Create?async(t,a)=>{const A=a[0],x=a[1],N=a[2];return u.find(X=>X.name===A)?{success:!1,message:r.MATERIAL_EXIST}:await C({name:A,dsp:N,code:x})}:void 0}):o("div",{})]})}function Le(){const{permissions:f}=S(U),e=f.get(P.MATERIALS),d=S(k),u=m.exports.useMemo(()=>d.toSorted((n,l)=>n.name>l.name?1:-1),[d]),[g,i]=m.exports.useState(0),{name:c,code:I}=u[g]||{name:"",code:""},R=D(le),L=D(re),E=D(Ee),M=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434"],C=u.map(n=>[n.name,n.code]),p=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:c,message:r.ENTER_CAPTION,type:T.TEXT},{caption:"\u041A\u043E\u0434:",value:I,message:r.ENTER_CODE,type:T.TEXT}];return m.exports.useEffect(()=>{i(0)},[u]),y(v,{children:[o(_,{heads:M,content:C,onSelectRow:n=>{i(n)}}),(e==null?void 0:e.Create)||(e==null?void 0:e.Update)||(e==null?void 0:e.Delete)?o(O,{name:c,items:p,onUpdate:e!=null&&e.Update?async(n,l)=>{const s=n[0]?l[0]:"",t=n[1]?l[1]:"";return await E({name:c,newName:s,code:t})}:void 0,onDelete:e!=null&&e.Delete?async n=>{const l=u.findIndex(t=>t.name===n),s=await R(u[l]);return i(0),s}:void 0,onAdd:e!=null&&e.Create?async(n,l)=>{const s=l[0],t=l[1];return u.find(A=>A.name===s)?{success:!1,message:r.MATERIAL_EXIST}:await L({name:s,code:t})}:void 0}):o("div",{})]})}function Me(){const{permissions:f}=S(U),e=f.get(P.MATERIALS),d=S(me),u=m.exports.useMemo(()=>d.toSorted((p,n)=>p.caption>n.caption?1:-1),[d]),[g,i]=m.exports.useState(0),{name:c,caption:I,code:R}=u[g]||{name:"",caption:"",code:""},L=D(pe),E=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434"],M=u.map(p=>[p.caption,p.code]),C=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:I,message:r.ENTER_CAPTION,type:T.TEXT},{caption:"\u041A\u043E\u0434:",value:R,message:r.ENTER_CODE,type:T.TEXT}];return m.exports.useEffect(()=>{i(0)},[d]),y(v,{children:[o(_,{heads:E,content:M,onSelectRow:p=>{i(p)}}),(e==null?void 0:e.Create)||(e==null?void 0:e.Update)||(e==null?void 0:e.Delete)?o(O,{name:c,items:C,onUpdate:e!=null&&e.Update?async(p,n)=>{const l=p[0]?n[0]:"",s=p[1]?n[1]:"";return await L({name:c,caption:l,code:s})}:void 0}):o("div",{})]})}function Ne(){const{permissions:f}=S(U),e=f.get(P.MATERIALS),d=S(Ae),u=m.exports.useMemo(()=>d.toSorted((n,l)=>n.name>l.name?1:-1),[d]),[g,i]=m.exports.useState(0),{name:c,code:I}=u[g]||{name:"",code:""},R=D(Te),L=D(De),E=D(ge),M=["\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435","\u041A\u043E\u0434"],C=u.map(n=>[n.name,n.code]),p=[{caption:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435:",value:c||"",message:r.ENTER_CAPTION,type:T.TEXT},{caption:"\u041A\u043E\u0434:",value:I,message:r.ENTER_CODE,type:T.TEXT}];return m.exports.useEffect(()=>{i(0)},[d]),y(v,{children:[o(_,{heads:M,content:C,onSelectRow:n=>{i(n)}}),(e==null?void 0:e.Create)||(e==null?void 0:e.Update)||(e==null?void 0:e.Delete)?o(O,{name:c,items:p,onUpdate:e!=null&&e.Update?async(n,l)=>{const s=n[0]?l[1]:"",t=n[1]?l[2]:"";return await E({name:c,code:s,caption:t})}:void 0,onDelete:e!=null&&e.Delete?async()=>{const n=await R(u[g]);return i(0),n}:void 0,onAdd:async(n,l)=>{const s=l[0];return u.find(a=>a.name===c)?{success:!1,message:r.MATERIAL_EXIST}:await L({name:c,code:s})}}):o("div",{})]})}function we(){const{permissions:f}=S(U),e=f.get(P.PRICES),[d,u]=m.exports.useState(w.PLATE),g=[...Se.entries()].map((c,I)=>o("div",{className:d===c[0]?"tab-button-active":"tab-button-inactive",onClick:()=>{u(c[0])},role:"button",children:c[1]},I)),i=ye(d);return m.exports.useEffect(()=>{e!=null&&e.Read||window.location.replace("/")},[e]),y("div",{className:"database-edit-container",children:[o("div",{className:"tab-header-container",children:g}),i]})}function ye(f){return{[w.PLATE]:o(Ie,{}),[w.PROFILE]:o(Ce,{}),[w.EDGE]:o(xe,{}),[w.ZAGLUSHKI]:o(Re,{}),[w.BRUSH]:o(Le,{}),[w.TREMPEL]:o(Me,{}),[w.UPLOTNITEL]:o(Ne,{})}[f]||o(fe,{})}export{we as default};
